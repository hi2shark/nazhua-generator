import{E as F,r as M,c as z,o as _,a as V,b as t,n as ne,d as te,e as d,w as y,F as L,f as P,g as D,T as le,h as w,i as U,t as O,j as X,k as se,u as W,l as oe,m as ie,p as re,q as J,s as ue}from"./index-BVOpS3PC.js";const H={PEK:{x:1025,y:178,name:"北京",country:"中国"},PVG:{x:1057,y:225,name:"上海",country:"中国"},CKG:{x:1010,y:235,name:"重庆",country:"中国"},TFU:{x:1e3,y:230,name:"成都",country:"中国"},HKG:{x:1039,y:263,name:"香港",country:"中国"},MFM:{x:1035,y:264,name:"澳门",country:"中国"},TPE:{x:1067,y:253,name:"台北",country:"中国"},OSA:{x:1109,y:207,name:"大阪",country:"日本"},TYO:{x:1124,y:199,name:"东京",country:"日本"},SEL:{x:1077,y:198,name:"首尔",country:"韩国"},SIN:{x:1e3,y:354,name:"新加坡",country:"新加坡"},JHB:{x:997,y:350,name:"新山",country:"马来西亚"},KUL:{x:990,y:345,name:"吉隆坡",country:"马来西亚"},HAN:{x:998,y:274,name:"河内",country:"越南"},SGN:{x:1015,y:314,name:"胡志明市",country:"越南"},LAX:{x:95,y:207,name:"洛杉矶",country:"美国"},LAS:{x:98,y:198,name:"拉斯维加斯",country:"美国"},SLC:{x:111,y:189,name:"盐湖城",country:"美国"},SJC:{x:87,y:193,name:"圣何塞",country:"美国"},SEA:{x:118,y:143,name:"西雅图",country:"美国"},MIA:{x:243,y:244,name:"迈阿密",country:"美国"},ORD:{x:233,y:175,name:"芝加哥",country:"美国"},NYC:{x:280,y:179,name:"纽约",country:"美国"},YYZ:{x:267,y:161,name:"多伦多",country:"加拿大"},SYD:{x:1167,y:519,name:"悉尼",country:"澳大利亚"},AMS:{x:595,y:125,name:"阿姆斯特丹",country:"荷兰"},LON:{x:571,y:127,name:"伦敦",country:"英国"},FRA:{x:603,y:137,name:"法兰克福",country:"德国"},LUX:{x:591,y:140,name:"卢森堡",country:"卢森堡"},CDG:{x:579,y:145,name:"巴黎",country:"法国"},SVO:{x:704,y:115,name:"莫斯科",country:"俄罗斯"},OTP:{x:673,y:160,name:"布加勒斯特",country:"罗马尼亚"},IST:{x:676,y:176,name:"伊斯坦布尔",country:"土耳其"}},Z={SGP:"SIN",ICN:"SEL",NRT:"TYO",HND:"TYO",KIX:"OSA",PAR:"CDG",MOW:"SVO",CHI:"ORD",SHA:"PVG",CAN:"CKG",CTU:"TFU",BJS:"PEK",HK:"HKG",MO:"MFM",TW:"TPE"},Q={JP:"TYO",SG:"SIN",KR:"SEL",MY:"KUL",VN:"HAN",TR:"IST",RO:"OTP",LU:"LUX",FR:"CDG",RU:"SVO",DE:"FRA",NL:"AMS",UK:"LON",GB:"LON",AU:"SYD",US:"LAX"},ce=()=>{var l;if((l=crypto)!==null&&l!==void 0&&l.randomUUID)return crypto.randomUUID();let f=new Date().getTime(),n=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,x=>{let r=Math.random()*16;return f>0?(r=(f+r)%16|0,f=Math.floor(f/16)):(r=(n+r)%16|0,n=Math.floor(n/16)),(x==="x"?r:r&3|8).toString(16)})},K=l=>{const f=document.createElement("textarea");f.value=l,document.body.appendChild(f),f.select(),document.execCommand("Copy"),document.body.removeChild(f),l.length<10?F.success(`复制"${l}"成功`):F.success("复制成功")};function de(){const l=localStorage.getItem("nazhua-custom-location");if(l)try{return JSON.parse(l)}catch{return localStorage.removeItem("nazhua-custom-location"),[]}return[]}function I(l){l&&localStorage.setItem("nazhua-custom-location",JSON.stringify(l))}const E={isSet(l){return l!=null},isEmpty(l,f=null){let n=!1,x=!1,r=!1;if(f===!0)n=!0;else{const g=f||{};n=g.allEmpty,x=g.objectEmpty,r=g.arrayEmpty}return!!(l==null||l.constructor.name==="String"&&l===""||(n||x)&&l.constructor.name==="Object"&&Object.getOwnPropertyNames(l).length===0||(n||r)&&Array.isArray(l)&&l.length===0)},isObject(l){return typeof l=="object"&&l!==null&&l.constructor.name==="Object"},isNumber(l,f=!1){return f&&typeof l=="string"?!Number.isNaN(Number(l)):typeof l=="number"},hasOwn(l,f){return Object.prototype.hasOwnProperty.call(l,f)}},R=(l,f)=>{const n=l.__vccOpts||l;for(const[x,r]of f)n[x]=r;return n},pe=["title"],me={__name:"world-map-point",props:{info:{type:Object,default:()=>({})}},emits:["point-tap"],setup(l,{emit:f}){const n=l,x=f,r=M(),g=z(()=>{var v;const u={};return u["--map-point-left"]=`${n.info.left}px`,u["--map-point-top"]=`${n.info.top}px`,(v=n.info)!=null&&v.size&&(u["--map-point-size"]=`${n.info.size}px`),u});function k(){x("point-tap",n.info)}return(u,v)=>{var S,a;return _(),V("div",{ref_key:"pointRef",ref:r,class:ne(["world-map-point","world-map-point--"+(((S=l.info)==null?void 0:S.type)||"default")]),style:te(g.value),title:((a=l.info)==null?void 0:a.label)||"",onClick:k},v[0]||(v[0]=[t("div",{class:"point-block"},null,-1)]),14,pe)}}},fe=R(me,[["__scopeId","data-v-e834ec66"]]),ye={__name:"world-map",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},locations:{type:Array,default:()=>[]}},emits:["point-coord","select-coord","mouse-coord"],setup(l,{emit:f}){const n=l,x=f,r=M(null),g=z(()=>{if(!E.isEmpty(n.width)&&!E.isEmpty(n.height))return{width:1280,height:621};const i=Number(n.width),p=Number(n.height);return!E.isEmpty(n.width)&&E.isEmpty(n.height)?{width:i,height:Math.ceil(621/1280*i)}:E.isEmpty(n.width)&&!E.isEmpty(n.height)?{width:Math.ceil(1280/621*p),height:p}:i/p>1280/621?{width:Math.ceil(p*(1280/621)),height:p}:{width:i,height:Math.ceil(i*(621/1280))}}),k=z(()=>({width:g.value.width/1280,height:g.value.height/621})),u=z(()=>{const i={};return i["--world-map-width"]=`${g.value.width}px`,i["--world-map-height"]=`${g.value.height}px`,i}),v=z(()=>n.locations.map(i=>({...i,key:i.key,left:g.value.width/1280*i.x,top:g.value.height/621*i.y,size:i.size||4,label:i.label})));function S(i){const p=Math.max(Math.round(i.offsetX/k.value.width),0),b=Math.max(Math.round(i.offsetY/k.value.height),0);x("select-coord",{x:p,y:b})}function a(i){const p=Math.max(Math.round(i.offsetX/k.value.width),0),b=Math.max(Math.round(i.offsetY/k.value.height),0);x("mouse-coord",{x:p,y:b})}function s(i){const p={x:i.left-i.size/2,y:i.top-i.size};console.log(p),x("point-coord",p)}return(i,p)=>(_(),V("div",{ref_key:"worldMapImgRef",ref:r,class:"world-map-group",style:te(u.value),onClick:S,onMousemove:a},[p[0]||(p[0]=t("div",{class:"world-map-img"},null,-1)),d(le,{name:"point",tag:"div",class:"world-map-point-container"},{default:y(()=>[(_(!0),V(L,null,P(v.value,b=>(_(),D(fe,{key:b.key,info:b,onPointTap:s},null,8,["info"]))),128))]),_:1})],36))}},ve=R(ye,[["__scopeId","data-v-d3800f5a"]]),he={class:"el-form-group"},_e={class:"dialog-footer"},xe={__name:"custom-point-edit-dialog",emits:["success"],setup(l,{expose:f,emit:n}){const x=n,r=M(!1),g=M(null),k=()=>({code:"",name:"",country:"",x:"",y:""}),u=M(k()),v={name:[{required:!0,message:"请输入名称",trigger:["change","blur"]}],code:[{required:!0,message:"请输入唯一编码",trigger:["change","blur"]}],x:[{required:!0,trigger:["change","blur"],validator:(b,c,C)=>E.isEmpty(c)?C(new Error("请输入X轴坐标")):E.isNumber(c)?c<0||c>1280?C(new Error("X轴坐标范围为0-1280")):C():C(new Error("X轴坐标必须为数字值"))}],y:[{required:!0,trigger:["change","blur"],validator:(b,c,C)=>E.isEmpty(c)?C(new Error("请输入Y轴坐标")):E.isNumber(c)?c<0||c>621?C(new Error("Y轴坐标范围为0-621")):C():C(new Error("Y轴坐标必须为数字值"))}]};let S,a,s;function i(){g.value.validate(b=>{if(b){const c=JSON.parse(JSON.stringify(u.value));if(typeof s=="function"&&!s(c))return;x("success",{data:c,info:a,type:S}),r.value=!1}})}function p(b,c,C){S=b,a=c,s=C,u.value=k(),Object.keys(u.value).forEach($=>{E.hasOwn(c,$)&&(u.value[$]=c[$])}),r.value=!0}return f({active:p}),(b,c)=>{const C=w("el-input"),$=w("el-form-item"),B=w("el-form"),j=w("el-button"),h=w("el-dialog");return _(),D(h,{modelValue:r.value,"onUpdate:modelValue":c[6]||(c[6]=o=>r.value=o),title:"自定义地图点",width:"400px","align-center":"","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1},{footer:y(()=>[t("div",_e,[d(j,{onClick:c[5]||(c[5]=o=>r.value=!1)},{default:y(()=>c[7]||(c[7]=[U("取 消")])),_:1}),d(j,{type:"primary",onClick:i},{default:y(()=>c[8]||(c[8]=[U(" 确 定 ")])),_:1})])]),default:y(()=>[d(B,{ref_key:"pointFormRef",ref:g,model:u.value,rules:v,"label-width":"80px"},{default:y(()=>[t("div",he,[d($,{label:"X轴",prop:"x"},{default:y(()=>[d(C,{modelValue:u.value.x,"onUpdate:modelValue":c[0]||(c[0]=o=>u.value.x=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入X轴坐标"},null,8,["modelValue"])]),_:1}),d($,{label:"Y轴",prop:"y","label-width":"50px"},{default:y(()=>[d(C,{modelValue:u.value.y,"onUpdate:modelValue":c[1]||(c[1]=o=>u.value.y=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入Y轴坐标"},null,8,["modelValue"])]),_:1})]),d($,{label:"唯一编码",prop:"code"},{default:y(()=>[d(C,{modelValue:u.value.code,"onUpdate:modelValue":c[2]||(c[2]=o=>u.value.code=o),placeholder:"请输入唯一编码",clearable:""},null,8,["modelValue"])]),_:1}),d($,{label:"地点名称",prop:"name"},{default:y(()=>[d(C,{modelValue:u.value.name,"onUpdate:modelValue":c[3]||(c[3]=o=>u.value.name=o),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),d($,{label:"国家地区",prop:"country"},{default:y(()=>[d(C,{modelValue:u.value.country,"onUpdate:modelValue":c[4]||(c[4]=o=>u.value.country=o),placeholder:"请输入国家地区, 可选",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ge=R(xe,[["__scopeId","data-v-5ee884d2"]]),be={class:"world-map-box"},Ce={class:"world-map-and-coord-group"},we={class:"map-operate"},ke={class:"coord-box"},Se={class:"el-form-group"},Me={class:"coord-temp-list"},Ve=["onClick"],$e={class:"location-info"},Oe={class:"location-name"},Ee={class:"location-operate"},Te=["onClick"],Ne={class:"default-location-group"},De={class:"operate-box"},ze={class:"right-box"},Ue={class:"show-default-location-to-map"},Le={class:"location-list"},Pe={class:"location-name"},Re=["onClick"],je={class:"mapping-list"},Ae=["onClick"],Be={class:"mapping-code"},Fe={class:"mapping-list"},Ye={class:"mapping-alias"},Ge={class:"mapping-code"},Xe={class:"custom-location-group"},He={class:"operate-box"},We={class:"right-box"},Ke={class:"show-custom-location-to-map"},Je={class:"location-list"},qe={class:"location-item-info"},Ze={class:"location-name"},Qe=["onClick"],Ie={class:"location-item-operate"},et=["onClick"],tt=["onClick"],ot={__name:"world-map-box",setup(l,{expose:f}){const n=M(1024);function x(o){let e=n.value;o==="zoomIn"?(e+=128,e=Math.min(e,3072)):o==="zoomOut"?(e-=128,e=Math.max(e,1024)):e=1024,n.value=e}const r=M(!0),g=M(!0),k=M(null),u=z(()=>Object.keys(H).map(o=>({...H[o],type:"default",key:o,code:o,size:4,label:`[${o}] - ${H[o].country}，${H[o].name}`}))),v=z(()=>Object.keys(Z).map(o=>({alias:o,code:Z[o]}))),S=z(()=>Object.keys(Q).map(o=>({alias:o,code:Q[o]}))),a=M(de()),s=M([]),i=z(()=>{const o=[];return r.value&&o.push(...u.value),o.push(...a.value),o.push(...s.value),o}),p=M({x:0,y:0});function b(o){p.value={x:o.x,y:o.y}}function c(o){p.value={x:o.x,y:o.y},s.value.push({x:o.x,y:o.y,type:"temp",key:ce(),size:4,label:`X:${o.x}，Y${o.y}`})}function C(o){s.value=s.value.filter(e=>e.key!==o)}function $(o){k.value.active("add",o,e=>a.value.some(N=>N.code===e.code)?(F.error("编码已存在"),!1):!0)}function B(o){k.value.active("edit",o,e=>a.value.length>1&&a.value.some(N=>N.code===e.code&&N.code!==o.code)?(F.error("编码重复，需要唯一"),!1):!0)}async function j(o){await oe.confirm("确定删除该自定义地点吗？").then(()=>!0).catch(()=>!1)&&(a.value=a.value.filter(T=>T.key!==o),I(a.value))}function h(o){const{data:e,type:T,info:N}=o;if(T==="add")a.value.push({key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`}),C(N.key);else if(T==="edit"){const Y=a.value.findIndex(G=>G.code===N.code);a.value.splice(Y,1,{key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`})}I(a.value)}return f({getData(){const o={};return a.value.forEach(e=>{o[e.code]={name:e.name,country:e.country,x:e.x,y:e.y}}),{customCodeMap:o}}}),(o,e)=>{const T=w("el-button"),N=w("el-scrollbar"),Y=w("el-input"),G=w("el-form-item"),ae=w("el-form"),q=w("el-switch");return _(),V("div",be,[t("div",Ce,[d(N,{style:{width:"1024px",height:"497px"}},{default:y(()=>[d(ve,{width:n.value,locations:i.value,onMouseCoord:b,onSelectCoord:c},null,8,["width","locations"]),t("div",we,[d(T,{type:"primary",size:"small",link:"",onClick:e[0]||(e[0]=m=>x("zoomIn"))},{default:y(()=>e[7]||(e[7]=[U(" 放大 ")])),_:1}),d(T,{type:"success",size:"small",link:"",onClick:e[1]||(e[1]=m=>x("zoomOut"))},{default:y(()=>e[8]||(e[8]=[U(" 缩小 ")])),_:1}),d(T,{type:"default",size:"small",link:"",onClick:e[2]||(e[2]=m=>x("reset"))},{default:y(()=>e[9]||(e[9]=[U(" 默认 ")])),_:1})])]),_:1}),t("div",ke,[e[12]||(e[12]=t("div",{class:"coord-title"},[t("span",null,"坐标记录")],-1)),d(ae,null,{default:y(()=>[t("div",Se,[d(G,{label:"X轴"},{default:y(()=>[d(Y,{modelValue:p.value.x,"onUpdate:modelValue":e[3]||(e[3]=m=>p.value.x=m)},null,8,["modelValue"])]),_:1}),d(G,{label:"Y轴"},{default:y(()=>[d(Y,{modelValue:p.value.y,"onUpdate:modelValue":e[4]||(e[4]=m=>p.value.y=m)},null,8,["modelValue"])]),_:1})])]),_:1}),e[13]||(e[13]=t("p",{class:"tips"}," 点击左侧地图会记录下坐标，点击记录坐标可以创建自定义地点；*隐藏内置地点后更方便戳点点 ",-1)),d(N,{height:"340px"},{default:y(()=>[t("div",Me,[(_(!0),V(L,null,P(s.value,m=>(_(),V("div",{key:m.key,class:"location-item",onClick:A=>$(m)},[t("div",$e,[e[10]||(e[10]=t("span",{class:"location-icon"},[t("span",{class:"ri-map-pin-5-line"})],-1)),t("span",Oe," X:"+O(m.x)+"，Y:"+O(m.y),1)]),t("div",Ee,[t("span",{class:"remove-btn",onClick:X(A=>C(m.key),["stop"])},e[11]||(e[11]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,Te)])],8,Ve))),128))])]),_:1})])]),t("div",Ne,[t("div",De,[e[14]||(e[14]=se('<div class="left-box" data-v-89d267d2><div class="mode-name" data-v-89d267d2><span class="name-label" data-v-89d267d2>内置定位地点</span><span class="name-desc" data-v-89d267d2>仅内置了几个我常见的城市定位，<span class="code-value" data-v-89d267d2>此颜色</span>的都是可用代码，点击可自动复制（吧</span></div></div>',1)),t("div",ze,[t("div",Ue,[d(q,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=m=>r.value=m),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",Le,[(_(!0),V(L,null,P(u.value,m=>(_(),V("div",{key:m.key,class:"location-item"},[e[15]||(e[15]=t("span",{class:"default-point"},[t("span",{class:"point-dot"})],-1)),t("span",Pe,O(m.name),1),t("span",{class:"location-code",onClick:X(A=>W(K)(m.code),["stop"])},O(m.code),9,Re)]))),128))]),e[18]||(e[18]=t("div",{class:"sub-name"},[t("span",null,"别名映射")],-1)),t("div",je,[(_(!0),V(L,null,P(v.value,m=>(_(),V("div",{key:m.alias,class:"mapping-item"},[t("span",{class:"mapping-alias",onClick:X(A=>W(K)(m.alias),["stop"])},O(m.alias),9,Ae),e[16]||(e[16]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Be,O(m.code),1)]))),128))]),e[19]||(e[19]=t("div",{class:"sub-name"},[t("span",null,"国别码默认映射"),t("span",{class:"sub-desc"},"(*没有指定location的节点以此为映射，没有在下面的国别码不显示)")],-1)),t("div",Fe,[(_(!0),V(L,null,P(S.value,m=>(_(),V("div",{key:m.alias,class:"mapping-item"},[t("span",Ye,O(m.alias),1),e[17]||(e[17]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Ge,O(m.code),1)]))),128))])]),t("div",Xe,[t("div",He,[e[20]||(e[20]=t("div",{class:"left-box"},[t("div",{class:"mode-name"},[t("span",{class:"name-label"},"自定义地点")])],-1)),t("div",We,[t("div",Ke,[d(q,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=m=>g.value=m),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",Je,[(_(!0),V(L,null,P(a.value,m=>(_(),V("div",{key:m.key,class:"location-item"},[t("div",qe,[e[21]||(e[21]=t("span",{class:"custom-point"},[t("span",{class:"point-dot"})],-1)),t("span",Ze,O(m.name),1),t("span",{class:"location-code",onClick:X(A=>W(K)(m.code),["stop"])},O(m.code),9,Qe)]),t("div",Ie,[t("span",{class:"edit-btn",onClick:A=>B(m)},e[22]||(e[22]=[t("span",{class:"ri-edit-2-line"},null,-1)]),8,et),t("span",{class:"remove-btn",onClick:A=>j(m.key)},e[23]||(e[23]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,tt)])]))),128))])]),d(ge,{ref_key:"customPointEditDialogRef",ref:k,onSuccess:h},null,512)])}}},at=R(ot,[["__scopeId","data-v-89d267d2"]]),ee={title:"",hideWorldMap:!1,hideHomeWorldMap:!1,hideDetailWorldMap:!1,hideFilter:!1,hideTag:!1,freeAmount:"",infinityCycle:"",buyBtnText:"",hideNavbarServerCount:!1,hideNavbarServerStat:!1,hideListItemStatusDonut:!1,hideListItemStat:!1,hideListItemBill:!1,listServerStatusType:"",detailServerStatusType:"",apiMonitorPath:"/api/v1/monitor/{id}",wsPath:"/ws",nezhaPath:"/nezha/",nezhaV0ConfigType:"servers",routeMode:""},nt={title:{label:"网站标题",placeholder:"请输入网站标题",remark:"默认显示为“哪吒探针”",type:"input"},hideWorldMap:{label:"隐藏地图",type:"switch",remark:"隐藏地图后，首页和详情页都不会显示地图"},hideHomeWorldMap:{label:"首页隐藏地图",type:"switch"},hideDetailWorldMap:{label:"详情页隐藏地图",type:"switch"},hideFilter:{label:"隐藏筛选",type:"switch"},hideTag:{label:"隐藏标签",type:"switch"},freeAmount:{label:"免费的叫啥",placeholder:"请输入免费服务的费用名称",remark:"默认显示为“免费”，万一你想叫它“白嫖”呢？",type:"input"},buyBtnText:{label:"购买按钮文案",placeholder:"请输入购买按钮文案",remark:"默认显示为“购买”，万一你想叫它“下单”呢？",type:"input"},infinityCycle:{label:"无限周期名称",placeholder:"请输入无限周期名称",remark:"默认显示为“无限”，万一你想叫它“永久”呢？",type:"input"},hideNavbarServerCount:{label:"隐藏服务器数量",type:"switch",remark:"隐藏导航栏的服务器数量统计"},hideNavbarServerStat:{label:"隐藏服务器统计",type:"switch",remark:"隐藏导航栏的服务器统计信息"},hideListItemStatusDonut:{label:"隐藏列表饼图",remark:"隐藏列表项的状态饼图，不影响详情页的状态饼图",type:"switch"},hideListItemStat:{label:"隐藏列表统计",remark:"隐藏列表项的统计信息，不影响详情页的统计信息",type:"switch"},hideListItemBill:{label:"隐藏列表账单",remark:"隐藏列表项的账单信息，不影响详情页的账单信息",type:"switch"},listServerStatusType:{label:"列表状态类型",placeholder:"请选择列表状态类型",remark:"列表项的状态类型",type:"select",options:[{label:"圆环饼图(donut) - 默认",value:"donut"},{label:"进度条(progress)",value:"progress"}]},detailServerStatusType:{label:"详情状态类型",placeholder:"请选择详情状态类型",remark:"详情页的状态类型",type:"select",options:[{label:"圆环饼图(donut) - 默认",value:"donut"},{label:"进度条(progress)",value:"progress"}]},apiMonitorPath:{label:"监控API地址",placeholder:"请输入网络服务监控API路径",remark:"主要是网络服务那个监控数据的读取，目前只会替换关键词 {id}",type:"input"},wsPath:{label:"WS服务地址",placeholder:"请输入WebSocket服务的路径",remark:"如果ws不可用，无法实时更新数据",type:"input"},nezhaPath:{label:"哪吒主页地址",placeholder:"请输入哪吒的路径",remark:"v0哪吒探针主页的地址，用于异步读取公开的节点信息，如果不可用无法读取“公开备注”",type:"input"},nezhaV0ConfigType:{label:"数据匹配关键词",placeholder:"请输入哪吒v0数据匹配关键词",remark:"v0哪吒主页上的数据匹配关键词，[ServerStatus、Default]主题是 servers，其它是 initData",type:"input",options:[{label:"servers",value:"servers",remark:"ServerStatus、Default主题"},{label:"initData",value:"initData",remark:"其它主题"}]},routeMode:{label:"路由模式",placeholder:"请选择路由模式",remark:"默认为h5，如果是hash模式，需要后端支持",type:"select",options:[{label:"h5",value:"h5",remark:"H5路由模式"},{label:"hash",value:"hash",remark:"Hash路由模式"}]}};function lt(){const l=localStorage.getItem("nazhua-custom-config");if(l)try{return JSON.parse(l)}catch{return localStorage.removeItem("nazhua-custom-config"),{}}return{}}function st(l){l&&localStorage.setItem("nazhua-custom-config",JSON.stringify(l))}const it={class:"config-box"},rt={class:"config-el-form-item-group"},ut={class:"enable-config-switch"},ct={class:"config-el-form-item-group--content"},dt={class:"autocomplete-option"},pt={class:"value"},mt={class:"desc"},ft={key:0,class:"config-el-form-item--remark"},yt={__name:"config-box",setup(l,{expose:f}){const n=M({}),x=M([]),r=M({});function g(){const a={},s=[];Object.keys(ee).forEach(i=>{const p=nt[i];p&&(a[i]=ee[i],r.value[i]=!1,s.push({prop:i,...p}))}),n.value=a,x.value=s}let k=null;function u(){k&&clearTimeout(k);const a={formData:n.value,enable:r.value};k=setTimeout(()=>{st(a)},1e3)}let v=!1;ie([n,r],()=>{v&&u()},{deep:!0});async function S(){await oe.confirm("确定要还原默认配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>!0).catch(()=>!1)&&(v=!1,g(),ue(()=>{v=!0}))}return re(()=>{g();const a=lt();a&&(Object.keys((a==null?void 0:a.formData)||{}).forEach(s=>{E.hasOwn(r.value,s)&&(n.value[s]=a.formData[s])}),Object.keys((a==null?void 0:a.enable)||{}).forEach(s=>{E.hasOwn(r.value,s)&&(r.value[s]=a.enable[s])})),v=!0}),f({getData(){const a={};return Object.keys(r.value).forEach(s=>{r.value[s]&&(a[s]=n.value[s])}),a}}),(a,s)=>{const i=w("el-switch"),p=w("el-autocomplete"),b=w("el-input"),c=w("el-option"),C=w("el-select"),$=w("el-form-item"),B=w("el-button"),j=w("el-form");return _(),V("div",it,[d(j,{model:n.value,"label-width":"150px"},{default:y(()=>[(_(!0),V(L,null,P(x.value,h=>(_(),D($,{key:h.prop,label:h.label,prop:h.prop},{default:y(()=>[t("div",rt,[t("div",ut,[d(i,{modelValue:r.value[h.prop],"onUpdate:modelValue":o=>r.value[h.prop]=o,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",ct,[h.type==="input"&&h.options?(_(),D(p,{key:0,modelValue:n.value[h.prop],"onUpdate:modelValue":o=>n.value[h.prop]=o,placeholder:h.placeholder,"fetch-suggestions":h.options},{default:y(({item:o})=>[t("div",dt,[t("div",pt,O(o.value),1),t("span",mt,O(o.label)+O(o.remark),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","fetch-suggestions"])):h.type==="input"?(_(),D(b,{key:1,modelValue:n.value[h.prop],"onUpdate:modelValue":o=>n.value[h.prop]=o,placeholder:h.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):h.type==="select"?(_(),D(C,{key:2,modelValue:n.value[h.prop],"onUpdate:modelValue":o=>n.value[h.prop]=o,placeholder:h.placeholder},{default:y(()=>[(_(!0),V(L,null,P(h.options,o=>(_(),D(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):h.type==="switch"?(_(),D(i,{key:3,modelValue:n.value[h.prop],"onUpdate:modelValue":o=>n.value[h.prop]=o},null,8,["modelValue","onUpdate:modelValue"])):J("",!0)]),h.remark?(_(),V("div",ft," Tips: "+O(h.remark),1)):J("",!0)])]),_:2},1032,["label","prop"]))),128)),d($,null,{default:y(()=>[d(B,{type:"warning",onClick:S},{default:y(()=>s[0]||(s[0]=[U(" 还原默认配置 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}},vt=R(yt,[["__scopeId","data-v-98aa85c9"]]),ht={class:"export-box"},_t={class:"config-box"},xt={class:"config-textarea-box"},gt={class:"config-textarea-operate"},bt={class:"left-box"},Ct={class:"right-box"},wt={__name:"export-box",props:{refreshData:{type:Function,default:()=>{}}},setup(l,{expose:f}){const n=l,x=M(!1),r=M("");function g(a,s=""){let i=`{
`;return Object.entries(a).forEach(([p,b])=>{let c=b;if(typeof b=="object"){i+=`${s}  ${p}: ${g(c,`${s}  `)},
`;return}typeof b=="string"&&(c=`'${b}'`),typeof b=="boolean"&&(c=b?"true":"false"),!(typeof b>"u")&&(i+=`${s}  ${p}: ${c},
`)}),i+=`${s}}`,i}function k(a){const s=`window.$$nazhuaConfig = ${g(a)};`;r.value=s,x.value=!1,setTimeout(()=>{x.value=!0},300)}function u(){const a=document.createElement("textarea");a.value=r.value,document.body.appendChild(a),a.select(),document.execCommand("Copy"),document.body.removeChild(a),F.success("复制成功")}function v(){const a=new Blob([r.value],{type:"text/plain"}),s=URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="config.js",i.click(),URL.revokeObjectURL(s)}function S(){var s;const a=(s=n==null?void 0:n.refreshData)==null?void 0:s.call(n);a&&k(a)}return f({setData(a){k(a)}}),(a,s)=>{const i=w("highlightjs"),p=w("el-button");return _(),V("div",ht,[t("div",_t,[t("div",xt,[x.value?(_(),D(i,{key:0,language:"js",code:r.value},null,8,["code"])):J("",!0)]),t("div",gt,[t("div",bt,[d(p,{type:"success",plain:"",onClick:u},{default:y(()=>s[0]||(s[0]=[U(" 复制内容 ")])),_:1}),d(p,{type:"primary",plain:"",onClick:v},{default:y(()=>s[1]||(s[1]=[U(" 下载文件 ")])),_:1})]),t("div",Ct,[d(p,{type:"danger",plain:"",onClick:S},{default:y(()=>s[2]||(s[2]=[U(" 重载配置 ")])),_:1})])])])])}}},kt=R(wt,[["__scopeId","data-v-a018bdc1"]]),St={class:"home-page"},Mt={class:"home-container container"},Vt={__name:"home",setup(l){const f=M("mapPoint"),n=M(null),x=M(null),r=M(null);function g(){var S,a,s,i;const u=(a=(S=n.value)==null?void 0:S.getData)==null?void 0:a.call(S),v=(i=(s=x.value)==null?void 0:s.getData)==null?void 0:i.call(s);return u!=null&&u.customCodeMap&&Object.keys(u.customCodeMap).length&&(v.customCodeMap=u==null?void 0:u.customCodeMap),v}function k(){var u,v;f.value==="exportConfig"&&((v=(u=r.value)==null?void 0:u.setData)==null||v.call(u,g()),console.log("导出配置",g()))}return(u,v)=>{const S=w("el-tab-pane"),a=w("el-tabs");return _(),V("div",St,[v[1]||(v[1]=t("div",{class:"home-header"},[t("div",{class:"home-header-container container"},[t("div",{class:"left-box"},[t("h1",{class:"site-name"},"Nazhua配置生成器")]),t("div",{class:"right-box"},[t("a",{class:"github-link",href:"https://github.com/hi2shark/nazhua",_target:"blank"}," Github ")])])],-1)),t("div",Mt,[d(a,{modelValue:f.value,"onUpdate:modelValue":v[0]||(v[0]=s=>f.value=s),onTabChange:k},{default:y(()=>[d(S,{label:"地图坐标拾取",name:"mapPoint"},{default:y(()=>[d(at,{ref_key:"worldMapBoxRef",ref:n},null,512)]),_:1}),d(S,{label:"自定义配置",name:"customConfig"},{default:y(()=>[d(vt,{ref_key:"configBoxRef",ref:x},null,512)]),_:1}),d(S,{label:"导出配置",name:"exportConfig"},{default:y(()=>[d(kt,{ref_key:"exportBoxRef",ref:r,"refresh-data":g},null,512)]),_:1})]),_:1},8,["modelValue"])])])}}},Ot=R(Vt,[["__scopeId","data-v-d140ac2e"]]);export{Ot as default};
