import{r as S,c as D,o as x,a as V,b as t,n as ee,d as I,e as d,w as h,F as U,f as N,g as L,T as te,h as M,i as P,t as E,j as oe,E as G,k as ne,l as le,m as ae,p as W}from"./index-C6K7T5Yn.js";const Y={PEK:{x:1025,y:178,name:"北京",country:"中国"},PVG:{x:1057,y:225,name:"上海",country:"中国"},CKG:{x:1010,y:235,name:"重庆",country:"中国"},TFU:{x:1e3,y:230,name:"成都",country:"中国"},HKG:{x:1039,y:263,name:"香港",country:"中国"},MFM:{x:1035,y:264,name:"澳门",country:"中国"},TPE:{x:1067,y:253,name:"台北",country:"中国"},OSA:{x:1109,y:207,name:"大阪",country:"日本"},TYO:{x:1124,y:199,name:"东京",country:"日本"},SEL:{x:1077,y:198,name:"首尔",country:"韩国"},SIN:{x:1e3,y:354,name:"新加坡",country:"新加坡"},JHB:{x:997,y:350,name:"新山",country:"马来西亚"},KUL:{x:990,y:345,name:"吉隆坡",country:"马来西亚"},HAN:{x:998,y:274,name:"河内",country:"越南"},SGN:{x:1015,y:314,name:"胡志明市",country:"越南"},LAX:{x:95,y:207,name:"洛杉矶",country:"美国"},LAS:{x:98,y:198,name:"拉斯维加斯",country:"美国"},SLC:{x:111,y:189,name:"盐湖城",country:"美国"},SJC:{x:87,y:193,name:"圣何塞",country:"美国"},SEA:{x:118,y:143,name:"西雅图",country:"美国"},MIA:{x:243,y:244,name:"迈阿密",country:"美国"},ORD:{x:233,y:175,name:"芝加哥",country:"美国"},NYC:{x:280,y:179,name:"纽约",country:"美国"},YYZ:{x:267,y:161,name:"多伦多",country:"加拿大"},SYD:{x:1167,y:519,name:"悉尼",country:"澳大利亚"},AMS:{x:595,y:125,name:"阿姆斯特丹",country:"荷兰"},LON:{x:571,y:127,name:"伦敦",country:"英国"},FRA:{x:603,y:137,name:"法兰克福",country:"德国"},LUX:{x:591,y:140,name:"卢森堡",country:"卢森堡"},CDG:{x:579,y:145,name:"巴黎",country:"法国"},SVO:{x:704,y:115,name:"莫斯科",country:"俄罗斯"},OTP:{x:673,y:160,name:"布加勒斯特",country:"罗马尼亚"},IST:{x:676,y:176,name:"伊斯坦布尔",country:"土耳其"}},K={SGP:"SIN",ICN:"SEL",NRT:"TYO",HND:"TYO",KIX:"OSA",PAR:"CDG",MOW:"SVO",CHI:"ORD",SHA:"PVG",CAN:"CKG",CTU:"TFU",BJS:"PEK",HK:"HKG",MO:"MFM",TW:"TPE"},J={JP:"TYO",SG:"SIN",KR:"SEL",MY:"KUL",VN:"HAN",TR:"IST",RO:"OTP",LU:"LUX",FR:"CDG",RU:"SVO",DE:"FRA",NL:"AMS",UK:"LON",AU:"SYD",US:"LAX"},se=()=>{var s;if((s=crypto)!==null&&s!==void 0&&s.randomUUID)return crypto.randomUUID();let y=new Date().getTime(),l=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,_=>{let r=Math.random()*16;return y>0?(r=(y+r)%16|0,y=Math.floor(y/16)):(r=(l+r)%16|0,l=Math.floor(l/16)),(_==="x"?r:r&3|8).toString(16)})};function ie(){const s=localStorage.getItem("nazhua-custom-location");if(s)try{return JSON.parse(s)}catch{return localStorage.removeItem("nazhua-custom-location"),[]}return[]}function q(s){localStorage.setItem("nazhua-custom-location",JSON.stringify(s))}const O={isSet(s){return s!=null},isEmpty(s,y=null){let l=!1,_=!1,r=!1;if(y===!0)l=!0;else{const g=y||{};l=g.allEmpty,_=g.objectEmpty,r=g.arrayEmpty}return!!(s==null||s.constructor.name==="String"&&s===""||(l||_)&&s.constructor.name==="Object"&&Object.getOwnPropertyNames(s).length===0||(l||r)&&Array.isArray(s)&&s.length===0)},isObject(s){return typeof s=="object"&&s!==null&&s.constructor.name==="Object"},isNumber(s,y=!1){return y&&typeof s=="string"?!Number.isNaN(Number(s)):typeof s=="number"},hasOwn(s,y){return Object.prototype.hasOwnProperty.call(s,y)}},R=(s,y)=>{const l=s.__vccOpts||s;for(const[_,r]of y)l[_]=r;return l},re=["title"],ue={__name:"world-map-point",props:{info:{type:Object,default:()=>({})}},emits:["point-tap"],setup(s,{emit:y}){const l=s,_=y,r=S(),g=D(()=>{var b;const u={};return u["--map-point-left"]=`${l.info.left}px`,u["--map-point-top"]=`${l.info.top}px`,(b=l.info)!=null&&b.size&&(u["--map-point-size"]=`${l.info.size}px`),u});function k(){_("point-tap",l.info)}return(u,b)=>{var p,o;return x(),V("div",{ref_key:"pointRef",ref:r,class:ee(["world-map-point","world-map-point--"+(((p=s.info)==null?void 0:p.type)||"default")]),style:I(g.value),title:((o=s.info)==null?void 0:o.label)||"",onClick:k},b[0]||(b[0]=[t("div",{class:"point-block"},null,-1)]),14,re)}}},ce=R(ue,[["__scopeId","data-v-e834ec66"]]),de={__name:"world-map",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},locations:{type:Array,default:()=>[]}},emits:["point-coord","select-coord","mouse-coord"],setup(s,{emit:y}){const l=s,_=y,r=S(null),g=D(()=>{if(!O.isEmpty(l.width)&&!O.isEmpty(l.height))return{width:1280,height:621};const a=Number(l.width),m=Number(l.height);return!O.isEmpty(l.width)&&O.isEmpty(l.height)?{width:a,height:Math.ceil(621/1280*a)}:O.isEmpty(l.width)&&!O.isEmpty(l.height)?{width:Math.ceil(1280/621*m),height:m}:a/m>1280/621?{width:Math.ceil(m*(1280/621)),height:m}:{width:a,height:Math.ceil(a*(621/1280))}}),k=D(()=>({width:g.value.width/1280,height:g.value.height/621})),u=D(()=>{const a={};return a["--world-map-width"]=`${g.value.width}px`,a["--world-map-height"]=`${g.value.height}px`,a}),b=D(()=>l.locations.map(a=>({...a,key:a.key,left:g.value.width/1280*a.x,top:g.value.height/621*a.y,size:a.size||4,label:a.label})));function p(a){const m=Math.max(Math.round(a.offsetX/k.value.width),0),w=Math.max(Math.round(a.offsetY/k.value.height),0);_("select-coord",{x:m,y:w})}function o(a){const m=Math.max(Math.round(a.offsetX/k.value.width),0),w=Math.max(Math.round(a.offsetY/k.value.height),0);_("mouse-coord",{x:m,y:w})}function i(a){const m={x:a.left-a.size/2,y:a.top-a.size};console.log(m),_("point-coord",m)}return(a,m)=>(x(),V("div",{ref_key:"worldMapImgRef",ref:r,class:"world-map-group",style:I(u.value),onClick:p,onMousemove:o},[m[0]||(m[0]=t("div",{class:"world-map-img"},null,-1)),d(te,{name:"point",tag:"div",class:"world-map-point-container"},{default:h(()=>[(x(!0),V(U,null,N(b.value,w=>(x(),L(ce,{key:w.key,info:w,onPointTap:i},null,8,["info"]))),128))]),_:1})],36))}},pe=R(de,[["__scopeId","data-v-d3800f5a"]]),me={class:"el-form-group"},fe={class:"dialog-footer"},ye={__name:"custom-point-edit-dialog",emits:["success"],setup(s,{expose:y,emit:l}){const _=l,r=S(!1),g=S(null),k=()=>({code:"",name:"",country:"",x:"",y:""}),u=S(k()),b={name:[{required:!0,message:"请输入名称",trigger:["change","blur"]}],code:[{required:!0,message:"请输入唯一编码",trigger:["change","blur"]}],x:[{required:!0,trigger:["change","blur"],validator:(w,c,C)=>O.isEmpty(c)?C(new Error("请输入X轴坐标")):O.isNumber(c)?c<0||c>1280?C(new Error("X轴坐标范围为0-1280")):C():C(new Error("X轴坐标必须为数字值"))}],y:[{required:!0,trigger:["change","blur"],validator:(w,c,C)=>O.isEmpty(c)?C(new Error("请输入Y轴坐标")):O.isNumber(c)?c<0||c>621?C(new Error("Y轴坐标范围为0-621")):C():C(new Error("Y轴坐标必须为数字值"))}]};let p,o,i;function a(){g.value.validate(w=>{if(w){const c=JSON.parse(JSON.stringify(u.value));if(typeof i=="function"&&!i(c))return;_("success",{data:c,info:o,type:p}),r.value=!1}})}function m(w,c,C){p=w,o=c,i=C,u.value=k(),Object.keys(u.value).forEach(v=>{O.hasOwn(c,v)&&(u.value[v]=c[v])}),r.value=!0}return y({active:m}),(w,c)=>{const C=M("el-input"),v=M("el-form-item"),$=M("el-form"),j=M("el-button"),B=M("el-dialog");return x(),L(B,{modelValue:r.value,"onUpdate:modelValue":c[6]||(c[6]=n=>r.value=n),title:"自定义地图点",width:"400px","align-center":"","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1},{footer:h(()=>[t("div",fe,[d(j,{onClick:c[5]||(c[5]=n=>r.value=!1)},{default:h(()=>c[7]||(c[7]=[P("取 消")])),_:1}),d(j,{type:"primary",onClick:a},{default:h(()=>c[8]||(c[8]=[P(" 确 定 ")])),_:1})])]),default:h(()=>[d($,{ref_key:"pointFormRef",ref:g,model:u.value,rules:b,"label-width":"80px"},{default:h(()=>[t("div",me,[d(v,{label:"X轴",prop:"x"},{default:h(()=>[d(C,{modelValue:u.value.x,"onUpdate:modelValue":c[0]||(c[0]=n=>u.value.x=n),modelModifiers:{number:!0},type:"number",placeholder:"请输入X轴坐标"},null,8,["modelValue"])]),_:1}),d(v,{label:"Y轴",prop:"y","label-width":"50px"},{default:h(()=>[d(C,{modelValue:u.value.y,"onUpdate:modelValue":c[1]||(c[1]=n=>u.value.y=n),modelModifiers:{number:!0},type:"number",placeholder:"请输入Y轴坐标"},null,8,["modelValue"])]),_:1})]),d(v,{label:"唯一编码",prop:"code"},{default:h(()=>[d(C,{modelValue:u.value.code,"onUpdate:modelValue":c[2]||(c[2]=n=>u.value.code=n),placeholder:"请输入唯一编码",clearable:""},null,8,["modelValue"])]),_:1}),d(v,{label:"地点名称",prop:"name"},{default:h(()=>[d(C,{modelValue:u.value.name,"onUpdate:modelValue":c[3]||(c[3]=n=>u.value.name=n),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),d(v,{label:"国家地区",prop:"country"},{default:h(()=>[d(C,{modelValue:u.value.country,"onUpdate:modelValue":c[4]||(c[4]=n=>u.value.country=n),placeholder:"请输入国家地区, 可选",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ve=R(ye,[["__scopeId","data-v-5ee884d2"]]),he={class:"world-map-box"},_e={class:"world-map-and-coord-group"},xe={class:"map-operate"},ge={class:"coord-box"},be={class:"el-form-group"},we={class:"coord-temp-list"},Ce=["onClick"],ke={class:"location-info"},Se={class:"location-name"},Me={class:"location-operate"},Ve=["onClick"],$e={class:"default-location-group"},Oe={class:"operate-box"},Ee={class:"right-box"},Te={class:"show-default-location-to-map"},ze={class:"location-list"},De={class:"location-name"},Ue={class:"location-code"},Ne={class:"mapping-list"},Le={class:"mapping-alias"},Pe={class:"mapping-code"},Re={class:"mapping-list"},je={class:"mapping-alias"},Ae={class:"mapping-code"},Fe={class:"custom-location-group"},Ye={class:"operate-box"},Be={class:"right-box"},Xe={class:"show-custom-location-to-map"},Ge={class:"location-list"},We={class:"location-item-info"},He={class:"location-name"},Ke={class:"location-code"},Je={class:"location-item-operate"},qe=["onClick"],Ze=["onClick"],Ie={__name:"world-map-box",setup(s,{expose:y}){const l=S(1024);function _(n){let e=l.value;n==="zoomIn"?(e+=128,e=Math.min(e,3072)):n==="zoomOut"?(e-=128,e=Math.max(e,1024)):e=1024,l.value=e}const r=S(!0),g=S(!0),k=S(null),u=D(()=>Object.keys(Y).map(n=>({...Y[n],type:"default",key:n,code:n,size:4,label:`[${n}] - ${Y[n].country}，${Y[n].name}`}))),b=D(()=>Object.keys(K).map(n=>({alias:n,code:K[n]}))),p=D(()=>Object.keys(J).map(n=>({alias:n,code:J[n]}))),o=S(ie()),i=S([]),a=D(()=>{const n=[];return r.value&&n.push(...u.value),n.push(...o.value),n.push(...i.value),n}),m=S({x:0,y:0});function w(n){m.value={x:n.x,y:n.y}}function c(n){m.value={x:n.x,y:n.y},i.value.push({x:n.x,y:n.y,type:"temp",key:se(),size:4,label:`X:${n.x}，Y${n.y}`})}function C(n){i.value=i.value.filter(e=>e.key!==n)}function v(n){k.value.active("add",n,e=>o.value.some(z=>z.code===e.code)?(G.error("编码已存在"),!1):!0)}function $(n){k.value.active("edit",n,e=>o.value.length>1&&o.value.some(z=>z.code===e.code&&z.code!==n.code)?(G.error("编码重复，需要唯一"),!1):!0)}async function j(n){await ne.confirm("确定删除该自定义地点吗？").then(()=>!0).catch(()=>!1)&&(o.value=o.value.filter(T=>T.key!==n),q(o.value))}function B(n){const{data:e,type:T,info:z}=n;if(T==="add")o.value.push({key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`}),C(z.key);else if(T==="edit"){const A=o.value.findIndex(F=>F.code===z.code);o.value.splice(A,1,{key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`})}q(o.value)}return y({getData(){const n={};return o.value.forEach(e=>{n[e.code]={name:e.name,country:e.country,x:e.x,y:e.y}}),{customCodeMap:n}}}),(n,e)=>{const T=M("el-button"),z=M("el-scrollbar"),A=M("el-input"),F=M("el-form-item"),Q=M("el-form"),H=M("el-switch");return x(),V("div",he,[t("div",_e,[d(z,{style:{width:"1024px",height:"497px"}},{default:h(()=>[d(pe,{width:l.value,locations:a.value,onMouseCoord:w,onSelectCoord:c},null,8,["width","locations"]),t("div",xe,[d(T,{type:"primary",size:"small",link:"",onClick:e[0]||(e[0]=f=>_("zoomIn"))},{default:h(()=>e[7]||(e[7]=[P(" 放大 ")])),_:1}),d(T,{type:"success",size:"small",link:"",onClick:e[1]||(e[1]=f=>_("zoomOut"))},{default:h(()=>e[8]||(e[8]=[P(" 缩小 ")])),_:1}),d(T,{type:"default",size:"small",link:"",onClick:e[2]||(e[2]=f=>_("reset"))},{default:h(()=>e[9]||(e[9]=[P(" 默认 ")])),_:1})])]),_:1}),t("div",ge,[e[12]||(e[12]=t("div",{class:"coord-title"},[t("span",null,"坐标记录")],-1)),d(Q,null,{default:h(()=>[t("div",be,[d(F,{label:"X轴"},{default:h(()=>[d(A,{modelValue:m.value.x,"onUpdate:modelValue":e[3]||(e[3]=f=>m.value.x=f)},null,8,["modelValue"])]),_:1}),d(F,{label:"Y轴"},{default:h(()=>[d(A,{modelValue:m.value.y,"onUpdate:modelValue":e[4]||(e[4]=f=>m.value.y=f)},null,8,["modelValue"])]),_:1})])]),_:1}),e[13]||(e[13]=t("p",{class:"tips"}," 点击左侧地图会记录下坐标，点击记录坐标可以创建自定义地点；*隐藏内置地点后更方便戳点点 ",-1)),d(z,{height:"340px"},{default:h(()=>[t("div",we,[(x(!0),V(U,null,N(i.value,f=>(x(),V("div",{key:f.key,class:"location-item",onClick:X=>v(f)},[t("div",ke,[e[10]||(e[10]=t("span",{class:"location-icon"},[t("span",{class:"ri-map-pin-5-line"})],-1)),t("span",Se," X:"+E(f.x)+"，Y:"+E(f.y),1)]),t("div",Me,[t("span",{class:"remove-btn",onClick:oe(X=>C(f.key),["stop"])},e[11]||(e[11]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,Ve)])],8,Ce))),128))])]),_:1})])]),t("div",$e,[t("div",Oe,[e[14]||(e[14]=t("div",{class:"left-box"},[t("div",{class:"mode-name"},[t("span",{class:"name-label"},"内置定位地点"),t("span",{class:"name-desc"},"由于时间和精力，目前没有做完整的数据中心城市标记，太累人了。。。大家自定义吧")])],-1)),t("div",Ee,[t("div",Te,[d(H,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=f=>r.value=f),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",ze,[(x(!0),V(U,null,N(u.value,f=>(x(),V("div",{key:f.key,class:"location-item"},[e[15]||(e[15]=t("span",{class:"default-point"},[t("span",{class:"point-dot"})],-1)),t("span",De,E(f.name),1),t("span",Ue," ["+E(f.code)+"] ",1)]))),128))]),e[18]||(e[18]=t("div",{class:"sub-name"},[t("span",null,"别名映射")],-1)),t("div",Ne,[(x(!0),V(U,null,N(b.value,f=>(x(),V("div",{key:f.alias,class:"mapping-item"},[t("span",Le,E(f.alias),1),e[16]||(e[16]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Pe,E(f.code),1)]))),128))]),e[19]||(e[19]=t("div",{class:"sub-name"},[t("span",null,"国别码默认映射"),t("span",{class:"sub-desc"},"(*没有指定location的节点以此为映射，没有在下面的国别码不显示)")],-1)),t("div",Re,[(x(!0),V(U,null,N(p.value,f=>(x(),V("div",{key:f.alias,class:"mapping-item"},[t("span",je,E(f.alias),1),e[17]||(e[17]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Ae,E(f.code),1)]))),128))])]),t("div",Fe,[t("div",Ye,[e[20]||(e[20]=t("div",{class:"left-box"},[t("div",{class:"mode-name"},[t("span",{class:"name-label"},"自定义地点")])],-1)),t("div",Be,[t("div",Xe,[d(H,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=f=>g.value=f),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",Ge,[(x(!0),V(U,null,N(o.value,f=>(x(),V("div",{key:f.key,class:"location-item"},[t("div",We,[e[21]||(e[21]=t("span",{class:"custom-point"},[t("span",{class:"point-dot"})],-1)),t("span",He,E(f.name),1),t("span",Ke," ["+E(f.code)+"] ",1)]),t("div",Je,[t("span",{class:"edit-btn",onClick:X=>$(f)},e[22]||(e[22]=[t("span",{class:"ri-edit-2-line"},null,-1)]),8,qe),t("span",{class:"remove-btn",onClick:X=>j(f.key)},e[23]||(e[23]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,Ze)])]))),128))])]),d(ve,{ref_key:"customPointEditDialogRef",ref:k,onSuccess:B},null,512)])}}},Qe=R(Ie,[["__scopeId","data-v-76d444ef"]]),Z={title:"",hideWorldMap:!1,hideHomeWorldMap:!1,hideDetailWorldMap:!1,hideFilter:!1,hideTag:!1,freeAmount:"",infinityCycle:"",hideListItemBill:!1,buyBtnText:"",apiMonitorPath:"/api/v1/monitor/{id}",wsPath:"/ws",nezhaPath:"/nezha/",nezhaV0ConfigType:"servers"},et={title:{label:"网站标题",placeholder:"请输入网站标题",remark:"默认显示为“哪吒探针”",type:"input"},hideWorldMap:{label:"隐藏地图",type:"switch",remark:"隐藏地图后，首页和详情页都不会显示地图"},hideHomeWorldMap:{label:"首页隐藏地图",type:"switch"},hideDetailWorldMap:{label:"详情页隐藏地图",type:"switch"},hideFilter:{label:"隐藏筛选",type:"switch"},hideTag:{label:"隐藏标签",type:"switch"},freeAmount:{label:"免费的叫啥",placeholder:"请输入免费服务的费用名称",remark:"默认显示为“免费”，万一你想叫它“白嫖”呢？",type:"input"},infinityCycle:{label:"无限周期名称",placeholder:"请输入无限周期名称",remark:"默认显示为“无限”，万一你想叫它“永久”呢？",type:"input"},hideListItemBill:{label:"隐藏列表账单",remark:"隐藏列表项的账单信息，不影响详情页的账单信息",type:"switch"},buyBtnText:{label:"购买按钮文案",placeholder:"请输入购买按钮文案",remark:"默认显示为“购买”，万一你想叫它“下单”呢？",type:"input"},apiMonitorPath:{label:"监控API地址",placeholder:"请输入网络服务监控API路径",remark:"主要是网络服务那个监控数据的读取，目前只会替换关键词 {id}",type:"input"},wsPath:{label:"WS服务地址",placeholder:"请输入WebSocket服务的路径",remark:"如果ws不可用，无法实时更新数据",type:"input"},nezhaPath:{label:"哪吒主页地址",placeholder:"请输入哪吒的路径",remark:"v0哪吒探针主页的地址，用于异步读取公开的节点信息，如果不可用无法读取“公开备注”",type:"input"},nezhaV0ConfigType:{label:"数据匹配关键词",placeholder:"请输入哪吒v0数据匹配关键词",remark:"v0哪吒主页上的数据匹配关键词，[ServerStatus、Default]主题是 servers，其它是 initData",type:"input",options:[{label:"servers",value:"servers",remark:"ServerStatus、Default主题"},{label:"initData",value:"initData",remark:"其它主题"}]}};function tt(){const s=localStorage.getItem("nazhua-custom-config");if(s)try{return JSON.parse(s)}catch{return localStorage.removeItem("nazhua-custom-config"),{}}return{}}function ot(s){localStorage.setItem("nazhua-custom-config",JSON.stringify(s))}const nt={class:"config-box"},lt={class:"config-el-form-item-group"},at={class:"enable-config-switch"},st={class:"config-el-form-item-group--content"},it={key:0,class:"config-el-form-item--remark"},rt={__name:"config-box",setup(s,{expose:y}){const l=S({}),_=S([]),r=S({});function g(){const p={},o=[];Object.keys(Z).forEach(i=>{const a=et[i];a&&(p[i]=Z[i],r.value[i]=!1,o.push({prop:i,...a}))}),l.value=p,_.value=o}let k=null;function u(){k&&clearTimeout(k);const p={formData:l.value,enable:r.value};k=setTimeout(()=>{ot(p)},1e3)}let b=!1;return le([l,r],()=>{b&&u()},{deep:!0}),ae(()=>{g();const p=tt();p&&(Object.keys((p==null?void 0:p.formData)||{}).forEach(o=>{O.hasOwn(r.value,o)&&(l.value[o]=p.formData[o])}),Object.keys((p==null?void 0:p.enable)||{}).forEach(o=>{O.hasOwn(r.value,o)&&(r.value[o]=p.enable[o])})),b=!0}),y({getData(){const p={};return Object.keys(r.value).forEach(o=>{r.value[o]&&(p[o]=l.value[o])}),p}}),(p,o)=>{const i=M("el-switch"),a=M("el-input"),m=M("el-option"),w=M("el-select"),c=M("el-form-item"),C=M("el-form");return x(),V("div",nt,[d(C,{model:l.value,"label-width":"150px"},{default:h(()=>[(x(!0),V(U,null,N(_.value,v=>(x(),L(c,{key:v.prop,label:v.label,prop:v.prop},{default:h(()=>[t("div",lt,[t("div",at,[d(i,{modelValue:r.value[v.prop],"onUpdate:modelValue":$=>r.value[v.prop]=$,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",st,[v.type==="input"?(x(),L(a,{key:0,modelValue:l.value[v.prop],"onUpdate:modelValue":$=>l.value[v.prop]=$,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):v.type==="select"?(x(),L(w,{key:1,modelValue:l.value[v.prop],"onUpdate:modelValue":$=>l.value[v.prop]=$,placeholder:v.placeholder},{default:h(()=>[(x(!0),V(U,null,N(v.options,$=>(x(),L(m,{key:$.value,label:$.label,value:$.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):v.type==="switch"?(x(),L(i,{key:2,modelValue:l.value[v.prop],"onUpdate:modelValue":$=>l.value[v.prop]=$},null,8,["modelValue","onUpdate:modelValue"])):W("",!0)]),v.remark?(x(),V("div",it," Tips: "+E(v.remark),1)):W("",!0)])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model"])])}}},ut=R(rt,[["__scopeId","data-v-b0e44188"]]),ct={class:"export-box"},dt={class:"config-box"},pt={class:"config-textarea-box"},mt={class:"config-textarea-operate"},ft={class:"left-box"},yt={class:"right-box"},vt={__name:"export-box",props:{refreshData:{type:Function,default:()=>{}}},setup(s,{expose:y}){const l=s,_=S(!1),r=S("");function g(o,i=""){let a=`{
`;return Object.entries(o).forEach(([m,w])=>{let c=w;if(typeof w=="object"){a+=`${i}  ${m}: ${g(c,`${i}  `)},
`;return}typeof w=="string"&&(c=`'${w}'`),typeof w=="boolean"&&(c=w?"true":"false"),!(typeof w>"u")&&(a+=`${i}  ${m}: ${c},
`)}),a+=`${i}}`,a}function k(o){const i=`window.$$nazhuaConfig = ${g(o)};`;r.value=i,_.value=!1,setTimeout(()=>{_.value=!0},300)}function u(){const o=document.createElement("textarea");o.value=r.value,document.body.appendChild(o),o.select(),document.execCommand("Copy"),document.body.removeChild(o),G.success("复制成功")}function b(){const o=new Blob([r.value],{type:"text/plain"}),i=URL.createObjectURL(o),a=document.createElement("a");a.href=i,a.download="config.js",a.click(),URL.revokeObjectURL(i)}function p(){var i;const o=(i=l==null?void 0:l.refreshData)==null?void 0:i.call(l);o&&k(o)}return y({setData(o){k(o)}}),(o,i)=>{const a=M("highlightjs"),m=M("el-button");return x(),V("div",ct,[t("div",dt,[t("div",pt,[_.value?(x(),L(a,{key:0,language:"js",code:r.value},null,8,["code"])):W("",!0)]),t("div",mt,[t("div",ft,[d(m,{type:"success",plain:"",onClick:u},{default:h(()=>i[0]||(i[0]=[P(" 复制内容 ")])),_:1}),d(m,{type:"primary",plain:"",onClick:b},{default:h(()=>i[1]||(i[1]=[P(" 下载文件 ")])),_:1})]),t("div",yt,[d(m,{type:"danger",plain:"",onClick:p},{default:h(()=>i[2]||(i[2]=[P(" 重载配置 ")])),_:1})])])])])}}},ht=R(vt,[["__scopeId","data-v-a018bdc1"]]),_t={class:"home-page"},xt={class:"home-container container"},gt={__name:"home",setup(s){const y=S("mapPoint"),l=S(null),_=S(null),r=S(null);function g(){var p,o,i,a;const u=(o=(p=l.value)==null?void 0:p.getData)==null?void 0:o.call(p),b=(a=(i=_.value)==null?void 0:i.getData)==null?void 0:a.call(i);return u!=null&&u.customCodeMap&&Object.keys(u.customCodeMap).length&&(b.customCodeMap=u==null?void 0:u.customCodeMap),b}function k(){var u,b;y.value==="exportConfig"&&((b=(u=r.value)==null?void 0:u.setData)==null||b.call(u,g()),console.log("导出配置",g()))}return(u,b)=>{const p=M("el-tab-pane"),o=M("el-tabs");return x(),V("div",_t,[b[1]||(b[1]=t("div",{class:"home-header"},[t("div",{class:"home-header-container container"},[t("div",{class:"left-box"},[t("h1",{class:"site-name"},"Nazhua配置生成器")]),t("div",{class:"right-box"},[t("a",{class:"github-link",href:"https://github.com/hi2shark/nazhua",_target:"blank"}," Github ")])])],-1)),t("div",xt,[d(o,{modelValue:y.value,"onUpdate:modelValue":b[0]||(b[0]=i=>y.value=i),onTabChange:k},{default:h(()=>[d(p,{label:"地图坐标拾取",name:"mapPoint"},{default:h(()=>[d(Qe,{ref_key:"worldMapBoxRef",ref:l},null,512)]),_:1}),d(p,{label:"自定义配置",name:"customConfig"},{default:h(()=>[d(ut,{ref_key:"configBoxRef",ref:_},null,512)]),_:1}),d(p,{label:"导出配置",name:"exportConfig"},{default:h(()=>[d(ht,{ref_key:"exportBoxRef",ref:r,"refresh-data":g},null,512)]),_:1})]),_:1},8,["modelValue"])])])}}},wt=R(gt,[["__scopeId","data-v-d140ac2e"]]);export{wt as default};
