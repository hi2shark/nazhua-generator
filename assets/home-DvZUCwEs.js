import{r as M,c as z,o as _,a as V,b as t,n as te,d as Q,e as d,w as f,F as L,f as P,g as N,T as oe,h as C,i as U,t as O,j as ne,E as G,k as I,l as ae,m as le,p as H,q as se}from"./index-B4g_AWGe.js";const Y={PEK:{x:1025,y:178,name:"北京",country:"中国"},PVG:{x:1057,y:225,name:"上海",country:"中国"},CKG:{x:1010,y:235,name:"重庆",country:"中国"},TFU:{x:1e3,y:230,name:"成都",country:"中国"},HKG:{x:1039,y:263,name:"香港",country:"中国"},MFM:{x:1035,y:264,name:"澳门",country:"中国"},TPE:{x:1067,y:253,name:"台北",country:"中国"},OSA:{x:1109,y:207,name:"大阪",country:"日本"},TYO:{x:1124,y:199,name:"东京",country:"日本"},SEL:{x:1077,y:198,name:"首尔",country:"韩国"},SIN:{x:1e3,y:354,name:"新加坡",country:"新加坡"},JHB:{x:997,y:350,name:"新山",country:"马来西亚"},KUL:{x:990,y:345,name:"吉隆坡",country:"马来西亚"},HAN:{x:998,y:274,name:"河内",country:"越南"},SGN:{x:1015,y:314,name:"胡志明市",country:"越南"},LAX:{x:95,y:207,name:"洛杉矶",country:"美国"},LAS:{x:98,y:198,name:"拉斯维加斯",country:"美国"},SLC:{x:111,y:189,name:"盐湖城",country:"美国"},SJC:{x:87,y:193,name:"圣何塞",country:"美国"},SEA:{x:118,y:143,name:"西雅图",country:"美国"},MIA:{x:243,y:244,name:"迈阿密",country:"美国"},ORD:{x:233,y:175,name:"芝加哥",country:"美国"},NYC:{x:280,y:179,name:"纽约",country:"美国"},YYZ:{x:267,y:161,name:"多伦多",country:"加拿大"},SYD:{x:1167,y:519,name:"悉尼",country:"澳大利亚"},AMS:{x:595,y:125,name:"阿姆斯特丹",country:"荷兰"},LON:{x:571,y:127,name:"伦敦",country:"英国"},FRA:{x:603,y:137,name:"法兰克福",country:"德国"},LUX:{x:591,y:140,name:"卢森堡",country:"卢森堡"},CDG:{x:579,y:145,name:"巴黎",country:"法国"},SVO:{x:704,y:115,name:"莫斯科",country:"俄罗斯"},OTP:{x:673,y:160,name:"布加勒斯特",country:"罗马尼亚"},IST:{x:676,y:176,name:"伊斯坦布尔",country:"土耳其"}},K={SGP:"SIN",ICN:"SEL",NRT:"TYO",HND:"TYO",KIX:"OSA",PAR:"CDG",MOW:"SVO",CHI:"ORD",SHA:"PVG",CAN:"CKG",CTU:"TFU",BJS:"PEK",HK:"HKG",MO:"MFM",TW:"TPE"},J={JP:"TYO",SG:"SIN",KR:"SEL",MY:"KUL",VN:"HAN",TR:"IST",RO:"OTP",LU:"LUX",FR:"CDG",RU:"SVO",DE:"FRA",NL:"AMS",UK:"LON",AU:"SYD",US:"LAX"},ie=()=>{var i;if((i=crypto)!==null&&i!==void 0&&i.randomUUID)return crypto.randomUUID();let y=new Date().getTime(),a=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,x=>{let r=Math.random()*16;return y>0?(r=(y+r)%16|0,y=Math.floor(y/16)):(r=(a+r)%16|0,a=Math.floor(a/16)),(x==="x"?r:r&3|8).toString(16)})};function re(){const i=localStorage.getItem("nazhua-custom-location");if(i)try{return JSON.parse(i)}catch{return localStorage.removeItem("nazhua-custom-location"),[]}return[]}function q(i){i&&localStorage.setItem("nazhua-custom-location",JSON.stringify(i))}const E={isSet(i){return i!=null},isEmpty(i,y=null){let a=!1,x=!1,r=!1;if(y===!0)a=!0;else{const g=y||{};a=g.allEmpty,x=g.objectEmpty,r=g.arrayEmpty}return!!(i==null||i.constructor.name==="String"&&i===""||(a||x)&&i.constructor.name==="Object"&&Object.getOwnPropertyNames(i).length===0||(a||r)&&Array.isArray(i)&&i.length===0)},isObject(i){return typeof i=="object"&&i!==null&&i.constructor.name==="Object"},isNumber(i,y=!1){return y&&typeof i=="string"?!Number.isNaN(Number(i)):typeof i=="number"},hasOwn(i,y){return Object.prototype.hasOwnProperty.call(i,y)}},R=(i,y)=>{const a=i.__vccOpts||i;for(const[x,r]of y)a[x]=r;return a},ue=["title"],ce={__name:"world-map-point",props:{info:{type:Object,default:()=>({})}},emits:["point-tap"],setup(i,{emit:y}){const a=i,x=y,r=M(),g=z(()=>{var h;const u={};return u["--map-point-left"]=`${a.info.left}px`,u["--map-point-top"]=`${a.info.top}px`,(h=a.info)!=null&&h.size&&(u["--map-point-size"]=`${a.info.size}px`),u});function k(){x("point-tap",a.info)}return(u,h)=>{var S,n;return _(),V("div",{ref_key:"pointRef",ref:r,class:te(["world-map-point","world-map-point--"+(((S=i.info)==null?void 0:S.type)||"default")]),style:Q(g.value),title:((n=i.info)==null?void 0:n.label)||"",onClick:k},h[0]||(h[0]=[t("div",{class:"point-block"},null,-1)]),14,ue)}}},de=R(ce,[["__scopeId","data-v-e834ec66"]]),pe={__name:"world-map",props:{width:{type:[Number,String],default:null},height:{type:[Number,String],default:null},locations:{type:Array,default:()=>[]}},emits:["point-coord","select-coord","mouse-coord"],setup(i,{emit:y}){const a=i,x=y,r=M(null),g=z(()=>{if(!E.isEmpty(a.width)&&!E.isEmpty(a.height))return{width:1280,height:621};const s=Number(a.width),p=Number(a.height);return!E.isEmpty(a.width)&&E.isEmpty(a.height)?{width:s,height:Math.ceil(621/1280*s)}:E.isEmpty(a.width)&&!E.isEmpty(a.height)?{width:Math.ceil(1280/621*p),height:p}:s/p>1280/621?{width:Math.ceil(p*(1280/621)),height:p}:{width:s,height:Math.ceil(s*(621/1280))}}),k=z(()=>({width:g.value.width/1280,height:g.value.height/621})),u=z(()=>{const s={};return s["--world-map-width"]=`${g.value.width}px`,s["--world-map-height"]=`${g.value.height}px`,s}),h=z(()=>a.locations.map(s=>({...s,key:s.key,left:g.value.width/1280*s.x,top:g.value.height/621*s.y,size:s.size||4,label:s.label})));function S(s){const p=Math.max(Math.round(s.offsetX/k.value.width),0),b=Math.max(Math.round(s.offsetY/k.value.height),0);x("select-coord",{x:p,y:b})}function n(s){const p=Math.max(Math.round(s.offsetX/k.value.width),0),b=Math.max(Math.round(s.offsetY/k.value.height),0);x("mouse-coord",{x:p,y:b})}function l(s){const p={x:s.left-s.size/2,y:s.top-s.size};console.log(p),x("point-coord",p)}return(s,p)=>(_(),V("div",{ref_key:"worldMapImgRef",ref:r,class:"world-map-group",style:Q(u.value),onClick:S,onMousemove:n},[p[0]||(p[0]=t("div",{class:"world-map-img"},null,-1)),d(oe,{name:"point",tag:"div",class:"world-map-point-container"},{default:f(()=>[(_(!0),V(L,null,P(h.value,b=>(_(),N(de,{key:b.key,info:b,onPointTap:l},null,8,["info"]))),128))]),_:1})],36))}},me=R(pe,[["__scopeId","data-v-d3800f5a"]]),fe={class:"el-form-group"},ye={class:"dialog-footer"},he={__name:"custom-point-edit-dialog",emits:["success"],setup(i,{expose:y,emit:a}){const x=a,r=M(!1),g=M(null),k=()=>({code:"",name:"",country:"",x:"",y:""}),u=M(k()),h={name:[{required:!0,message:"请输入名称",trigger:["change","blur"]}],code:[{required:!0,message:"请输入唯一编码",trigger:["change","blur"]}],x:[{required:!0,trigger:["change","blur"],validator:(b,c,w)=>E.isEmpty(c)?w(new Error("请输入X轴坐标")):E.isNumber(c)?c<0||c>1280?w(new Error("X轴坐标范围为0-1280")):w():w(new Error("X轴坐标必须为数字值"))}],y:[{required:!0,trigger:["change","blur"],validator:(b,c,w)=>E.isEmpty(c)?w(new Error("请输入Y轴坐标")):E.isNumber(c)?c<0||c>621?w(new Error("Y轴坐标范围为0-621")):w():w(new Error("Y轴坐标必须为数字值"))}]};let S,n,l;function s(){g.value.validate(b=>{if(b){const c=JSON.parse(JSON.stringify(u.value));if(typeof l=="function"&&!l(c))return;x("success",{data:c,info:n,type:S}),r.value=!1}})}function p(b,c,w){S=b,n=c,l=w,u.value=k(),Object.keys(u.value).forEach($=>{E.hasOwn(c,$)&&(u.value[$]=c[$])}),r.value=!0}return y({active:p}),(b,c)=>{const w=C("el-input"),$=C("el-form-item"),A=C("el-form"),j=C("el-button"),v=C("el-dialog");return _(),N(v,{modelValue:r.value,"onUpdate:modelValue":c[6]||(c[6]=o=>r.value=o),title:"自定义地图点",width:"400px","align-center":"","append-to-body":"","destroy-on-close":"","close-on-click-modal":!1},{footer:f(()=>[t("div",ye,[d(j,{onClick:c[5]||(c[5]=o=>r.value=!1)},{default:f(()=>c[7]||(c[7]=[U("取 消")])),_:1}),d(j,{type:"primary",onClick:s},{default:f(()=>c[8]||(c[8]=[U(" 确 定 ")])),_:1})])]),default:f(()=>[d(A,{ref_key:"pointFormRef",ref:g,model:u.value,rules:h,"label-width":"80px"},{default:f(()=>[t("div",fe,[d($,{label:"X轴",prop:"x"},{default:f(()=>[d(w,{modelValue:u.value.x,"onUpdate:modelValue":c[0]||(c[0]=o=>u.value.x=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入X轴坐标"},null,8,["modelValue"])]),_:1}),d($,{label:"Y轴",prop:"y","label-width":"50px"},{default:f(()=>[d(w,{modelValue:u.value.y,"onUpdate:modelValue":c[1]||(c[1]=o=>u.value.y=o),modelModifiers:{number:!0},type:"number",placeholder:"请输入Y轴坐标"},null,8,["modelValue"])]),_:1})]),d($,{label:"唯一编码",prop:"code"},{default:f(()=>[d(w,{modelValue:u.value.code,"onUpdate:modelValue":c[2]||(c[2]=o=>u.value.code=o),placeholder:"请输入唯一编码",clearable:""},null,8,["modelValue"])]),_:1}),d($,{label:"地点名称",prop:"name"},{default:f(()=>[d(w,{modelValue:u.value.name,"onUpdate:modelValue":c[3]||(c[3]=o=>u.value.name=o),placeholder:"请输入名称",clearable:""},null,8,["modelValue"])]),_:1}),d($,{label:"国家地区",prop:"country"},{default:f(()=>[d(w,{modelValue:u.value.country,"onUpdate:modelValue":c[4]||(c[4]=o=>u.value.country=o),placeholder:"请输入国家地区, 可选",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}},ve=R(he,[["__scopeId","data-v-5ee884d2"]]),_e={class:"world-map-box"},xe={class:"world-map-and-coord-group"},ge={class:"map-operate"},be={class:"coord-box"},we={class:"el-form-group"},Ce={class:"coord-temp-list"},ke=["onClick"],Se={class:"location-info"},Me={class:"location-name"},Ve={class:"location-operate"},$e=["onClick"],Oe={class:"default-location-group"},Ee={class:"operate-box"},Te={class:"right-box"},De={class:"show-default-location-to-map"},Ne={class:"location-list"},ze={class:"location-name"},Ue={class:"location-code"},Le={class:"mapping-list"},Pe={class:"mapping-alias"},Re={class:"mapping-code"},je={class:"mapping-list"},Ae={class:"mapping-alias"},Be={class:"mapping-code"},Fe={class:"custom-location-group"},Ye={class:"operate-box"},Xe={class:"right-box"},Ge={class:"show-custom-location-to-map"},He={class:"location-list"},We={class:"location-item-info"},Ke={class:"location-name"},Je={class:"location-code"},qe={class:"location-item-operate"},Ze=["onClick"],Qe=["onClick"],Ie={__name:"world-map-box",setup(i,{expose:y}){const a=M(1024);function x(o){let e=a.value;o==="zoomIn"?(e+=128,e=Math.min(e,3072)):o==="zoomOut"?(e-=128,e=Math.max(e,1024)):e=1024,a.value=e}const r=M(!0),g=M(!0),k=M(null),u=z(()=>Object.keys(Y).map(o=>({...Y[o],type:"default",key:o,code:o,size:4,label:`[${o}] - ${Y[o].country}，${Y[o].name}`}))),h=z(()=>Object.keys(K).map(o=>({alias:o,code:K[o]}))),S=z(()=>Object.keys(J).map(o=>({alias:o,code:J[o]}))),n=M(re()),l=M([]),s=z(()=>{const o=[];return r.value&&o.push(...u.value),o.push(...n.value),o.push(...l.value),o}),p=M({x:0,y:0});function b(o){p.value={x:o.x,y:o.y}}function c(o){p.value={x:o.x,y:o.y},l.value.push({x:o.x,y:o.y,type:"temp",key:ie(),size:4,label:`X:${o.x}，Y${o.y}`})}function w(o){l.value=l.value.filter(e=>e.key!==o)}function $(o){k.value.active("add",o,e=>n.value.some(D=>D.code===e.code)?(G.error("编码已存在"),!1):!0)}function A(o){k.value.active("edit",o,e=>n.value.length>1&&n.value.some(D=>D.code===e.code&&D.code!==o.code)?(G.error("编码重复，需要唯一"),!1):!0)}async function j(o){await I.confirm("确定删除该自定义地点吗？").then(()=>!0).catch(()=>!1)&&(n.value=n.value.filter(T=>T.key!==o),q(n.value))}function v(o){const{data:e,type:T,info:D}=o;if(T==="add")n.value.push({key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`}),w(D.key);else if(T==="edit"){const B=n.value.findIndex(F=>F.code===D.code);n.value.splice(B,1,{key:e.code,type:"custom",code:e.code,name:e.name,country:e.country,x:e.x,y:e.y,size:4,label:`[${e.code}] - ${e.country}，${e.name}`})}q(n.value)}return y({getData(){const o={};return n.value.forEach(e=>{o[e.code]={name:e.name,country:e.country,x:e.x,y:e.y}}),{customCodeMap:o}}}),(o,e)=>{const T=C("el-button"),D=C("el-scrollbar"),B=C("el-input"),F=C("el-form-item"),ee=C("el-form"),W=C("el-switch");return _(),V("div",_e,[t("div",xe,[d(D,{style:{width:"1024px",height:"497px"}},{default:f(()=>[d(me,{width:a.value,locations:s.value,onMouseCoord:b,onSelectCoord:c},null,8,["width","locations"]),t("div",ge,[d(T,{type:"primary",size:"small",link:"",onClick:e[0]||(e[0]=m=>x("zoomIn"))},{default:f(()=>e[7]||(e[7]=[U(" 放大 ")])),_:1}),d(T,{type:"success",size:"small",link:"",onClick:e[1]||(e[1]=m=>x("zoomOut"))},{default:f(()=>e[8]||(e[8]=[U(" 缩小 ")])),_:1}),d(T,{type:"default",size:"small",link:"",onClick:e[2]||(e[2]=m=>x("reset"))},{default:f(()=>e[9]||(e[9]=[U(" 默认 ")])),_:1})])]),_:1}),t("div",be,[e[12]||(e[12]=t("div",{class:"coord-title"},[t("span",null,"坐标记录")],-1)),d(ee,null,{default:f(()=>[t("div",we,[d(F,{label:"X轴"},{default:f(()=>[d(B,{modelValue:p.value.x,"onUpdate:modelValue":e[3]||(e[3]=m=>p.value.x=m)},null,8,["modelValue"])]),_:1}),d(F,{label:"Y轴"},{default:f(()=>[d(B,{modelValue:p.value.y,"onUpdate:modelValue":e[4]||(e[4]=m=>p.value.y=m)},null,8,["modelValue"])]),_:1})])]),_:1}),e[13]||(e[13]=t("p",{class:"tips"}," 点击左侧地图会记录下坐标，点击记录坐标可以创建自定义地点；*隐藏内置地点后更方便戳点点 ",-1)),d(D,{height:"340px"},{default:f(()=>[t("div",Ce,[(_(!0),V(L,null,P(l.value,m=>(_(),V("div",{key:m.key,class:"location-item",onClick:X=>$(m)},[t("div",Se,[e[10]||(e[10]=t("span",{class:"location-icon"},[t("span",{class:"ri-map-pin-5-line"})],-1)),t("span",Me," X:"+O(m.x)+"，Y:"+O(m.y),1)]),t("div",Ve,[t("span",{class:"remove-btn",onClick:ne(X=>w(m.key),["stop"])},e[11]||(e[11]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,$e)])],8,ke))),128))])]),_:1})])]),t("div",Oe,[t("div",Ee,[e[14]||(e[14]=t("div",{class:"left-box"},[t("div",{class:"mode-name"},[t("span",{class:"name-label"},"内置定位地点"),t("span",{class:"name-desc"},"由于时间和精力，目前没有做完整的数据中心城市标记，太累人了。。。大家自定义吧")])],-1)),t("div",Te,[t("div",De,[d(W,{modelValue:r.value,"onUpdate:modelValue":e[5]||(e[5]=m=>r.value=m),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",Ne,[(_(!0),V(L,null,P(u.value,m=>(_(),V("div",{key:m.key,class:"location-item"},[e[15]||(e[15]=t("span",{class:"default-point"},[t("span",{class:"point-dot"})],-1)),t("span",ze,O(m.name),1),t("span",Ue," ["+O(m.code)+"] ",1)]))),128))]),e[18]||(e[18]=t("div",{class:"sub-name"},[t("span",null,"别名映射")],-1)),t("div",Le,[(_(!0),V(L,null,P(h.value,m=>(_(),V("div",{key:m.alias,class:"mapping-item"},[t("span",Pe,O(m.alias),1),e[16]||(e[16]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Re,O(m.code),1)]))),128))]),e[19]||(e[19]=t("div",{class:"sub-name"},[t("span",null,"国别码默认映射"),t("span",{class:"sub-desc"},"(*没有指定location的节点以此为映射，没有在下面的国别码不显示)")],-1)),t("div",je,[(_(!0),V(L,null,P(S.value,m=>(_(),V("div",{key:m.alias,class:"mapping-item"},[t("span",Ae,O(m.alias),1),e[17]||(e[17]=t("span",{class:"ri-arrow-right-line"},null,-1)),t("span",Be,O(m.code),1)]))),128))])]),t("div",Fe,[t("div",Ye,[e[20]||(e[20]=t("div",{class:"left-box"},[t("div",{class:"mode-name"},[t("span",{class:"name-label"},"自定义地点")])],-1)),t("div",Xe,[t("div",Ge,[d(W,{modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=m=>g.value=m),size:"small","inline-prompt":"","active-text":"显示","inactive-text":"隐藏"},null,8,["modelValue"])])])]),t("div",He,[(_(!0),V(L,null,P(n.value,m=>(_(),V("div",{key:m.key,class:"location-item"},[t("div",We,[e[21]||(e[21]=t("span",{class:"custom-point"},[t("span",{class:"point-dot"})],-1)),t("span",Ke,O(m.name),1),t("span",Je," ["+O(m.code)+"] ",1)]),t("div",qe,[t("span",{class:"edit-btn",onClick:X=>A(m)},e[22]||(e[22]=[t("span",{class:"ri-edit-2-line"},null,-1)]),8,Ze),t("span",{class:"remove-btn",onClick:X=>j(m.key)},e[23]||(e[23]=[t("span",{class:"ri-close-circle-fill"},null,-1)]),8,Qe)])]))),128))])]),d(ve,{ref_key:"customPointEditDialogRef",ref:k,onSuccess:v},null,512)])}}},et=R(Ie,[["__scopeId","data-v-76d444ef"]]),Z={title:"",hideWorldMap:!1,hideHomeWorldMap:!1,hideDetailWorldMap:!1,hideFilter:!1,hideTag:!1,freeAmount:"",infinityCycle:"",buyBtnText:"",hideNavbarServerCount:!1,hideNavbarServerStat:!1,hideListItemStatusDonut:!1,hideListItemStat:!1,hideListItemBill:!1,apiMonitorPath:"/api/v1/monitor/{id}",wsPath:"/ws",nezhaPath:"/nezha/",nezhaV0ConfigType:"servers",routeMode:""},tt={title:{label:"网站标题",placeholder:"请输入网站标题",remark:"默认显示为“哪吒探针”",type:"input"},hideWorldMap:{label:"隐藏地图",type:"switch",remark:"隐藏地图后，首页和详情页都不会显示地图"},hideHomeWorldMap:{label:"首页隐藏地图",type:"switch"},hideDetailWorldMap:{label:"详情页隐藏地图",type:"switch"},hideFilter:{label:"隐藏筛选",type:"switch"},hideTag:{label:"隐藏标签",type:"switch"},freeAmount:{label:"免费的叫啥",placeholder:"请输入免费服务的费用名称",remark:"默认显示为“免费”，万一你想叫它“白嫖”呢？",type:"input"},buyBtnText:{label:"购买按钮文案",placeholder:"请输入购买按钮文案",remark:"默认显示为“购买”，万一你想叫它“下单”呢？",type:"input"},infinityCycle:{label:"无限周期名称",placeholder:"请输入无限周期名称",remark:"默认显示为“无限”，万一你想叫它“永久”呢？",type:"input"},hideNavbarServerCount:{label:"隐藏服务器数量",type:"switch",remark:"隐藏导航栏的服务器数量统计"},hideNavbarServerStat:{label:"隐藏服务器统计",type:"switch",remark:"隐藏导航栏的服务器统计信息"},hideListItemStatusDonut:{label:"隐藏列表饼图",remark:"隐藏列表项的状态饼图，不影响详情页的状态饼图",type:"switch"},hideListItemStat:{label:"隐藏列表统计",remark:"隐藏列表项的统计信息，不影响详情页的统计信息",type:"switch"},hideListItemBill:{label:"隐藏列表账单",remark:"隐藏列表项的账单信息，不影响详情页的账单信息",type:"switch"},apiMonitorPath:{label:"监控API地址",placeholder:"请输入网络服务监控API路径",remark:"主要是网络服务那个监控数据的读取，目前只会替换关键词 {id}",type:"input"},wsPath:{label:"WS服务地址",placeholder:"请输入WebSocket服务的路径",remark:"如果ws不可用，无法实时更新数据",type:"input"},nezhaPath:{label:"哪吒主页地址",placeholder:"请输入哪吒的路径",remark:"v0哪吒探针主页的地址，用于异步读取公开的节点信息，如果不可用无法读取“公开备注”",type:"input"},nezhaV0ConfigType:{label:"数据匹配关键词",placeholder:"请输入哪吒v0数据匹配关键词",remark:"v0哪吒主页上的数据匹配关键词，[ServerStatus、Default]主题是 servers，其它是 initData",type:"input",options:[{label:"servers",value:"servers",remark:"ServerStatus、Default主题"},{label:"initData",value:"initData",remark:"其它主题"}]},routeMode:{label:"路由模式",placeholder:"请选择路由模式",remark:"默认为h5，如果是hash模式，需要后端支持",type:"select",options:[{label:"h5",value:"h5",remark:"H5路由模式"},{label:"hash",value:"hash",remark:"Hash路由模式"}]}};function ot(){const i=localStorage.getItem("nazhua-custom-config");if(i)try{return JSON.parse(i)}catch{return localStorage.removeItem("nazhua-custom-config"),{}}return{}}function nt(i){i&&localStorage.setItem("nazhua-custom-config",JSON.stringify(i))}const at={class:"config-box"},lt={class:"config-el-form-item-group"},st={class:"enable-config-switch"},it={class:"config-el-form-item-group--content"},rt={class:"autocomplete-option"},ut={class:"value"},ct={class:"desc"},dt={key:0,class:"config-el-form-item--remark"},pt={__name:"config-box",setup(i,{expose:y}){const a=M({}),x=M([]),r=M({});function g(){const n={},l=[];Object.keys(Z).forEach(s=>{const p=tt[s];p&&(n[s]=Z[s],r.value[s]=!1,l.push({prop:s,...p}))}),a.value=n,x.value=l}let k=null;function u(){k&&clearTimeout(k);const n={formData:a.value,enable:r.value};k=setTimeout(()=>{nt(n)},1e3)}let h=!1;ae([a,r],()=>{h&&u()},{deep:!0});async function S(){await I.confirm("确定要还原默认配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>!0).catch(()=>!1)&&(h=!1,g(),se(()=>{h=!0}))}return le(()=>{g();const n=ot();n&&(Object.keys((n==null?void 0:n.formData)||{}).forEach(l=>{E.hasOwn(r.value,l)&&(a.value[l]=n.formData[l])}),Object.keys((n==null?void 0:n.enable)||{}).forEach(l=>{E.hasOwn(r.value,l)&&(r.value[l]=n.enable[l])})),h=!0}),y({getData(){const n={};return Object.keys(r.value).forEach(l=>{r.value[l]&&(n[l]=a.value[l])}),n}}),(n,l)=>{const s=C("el-switch"),p=C("el-autocomplete"),b=C("el-input"),c=C("el-option"),w=C("el-select"),$=C("el-form-item"),A=C("el-button"),j=C("el-form");return _(),V("div",at,[d(j,{model:a.value,"label-width":"150px"},{default:f(()=>[(_(!0),V(L,null,P(x.value,v=>(_(),N($,{key:v.prop,label:v.label,prop:v.prop},{default:f(()=>[t("div",lt,[t("div",st,[d(s,{modelValue:r.value[v.prop],"onUpdate:modelValue":o=>r.value[v.prop]=o,"inline-prompt":"","active-text":"启用","inactive-text":"禁用"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",it,[v.type==="input"&&v.options?(_(),N(p,{key:0,modelValue:a.value[v.prop],"onUpdate:modelValue":o=>a.value[v.prop]=o,placeholder:v.placeholder,"fetch-suggestions":v.options},{default:f(({item:o})=>[t("div",rt,[t("div",ut,O(o.value),1),t("span",ct,O(o.label)+O(o.remark),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","fetch-suggestions"])):v.type==="input"?(_(),N(b,{key:1,modelValue:a.value[v.prop],"onUpdate:modelValue":o=>a.value[v.prop]=o,placeholder:v.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):v.type==="select"?(_(),N(w,{key:2,modelValue:a.value[v.prop],"onUpdate:modelValue":o=>a.value[v.prop]=o,placeholder:v.placeholder},{default:f(()=>[(_(!0),V(L,null,P(v.options,o=>(_(),N(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):v.type==="switch"?(_(),N(s,{key:3,modelValue:a.value[v.prop],"onUpdate:modelValue":o=>a.value[v.prop]=o},null,8,["modelValue","onUpdate:modelValue"])):H("",!0)]),v.remark?(_(),V("div",dt," Tips: "+O(v.remark),1)):H("",!0)])]),_:2},1032,["label","prop"]))),128)),d($,null,{default:f(()=>[d(A,{type:"warning",onClick:S},{default:f(()=>l[0]||(l[0]=[U(" 还原默认配置 ")])),_:1})]),_:1})]),_:1},8,["model"])])}}},mt=R(pt,[["__scopeId","data-v-98aa85c9"]]),ft={class:"export-box"},yt={class:"config-box"},ht={class:"config-textarea-box"},vt={class:"config-textarea-operate"},_t={class:"left-box"},xt={class:"right-box"},gt={__name:"export-box",props:{refreshData:{type:Function,default:()=>{}}},setup(i,{expose:y}){const a=i,x=M(!1),r=M("");function g(n,l=""){let s=`{
`;return Object.entries(n).forEach(([p,b])=>{let c=b;if(typeof b=="object"){s+=`${l}  ${p}: ${g(c,`${l}  `)},
`;return}typeof b=="string"&&(c=`'${b}'`),typeof b=="boolean"&&(c=b?"true":"false"),!(typeof b>"u")&&(s+=`${l}  ${p}: ${c},
`)}),s+=`${l}}`,s}function k(n){const l=`window.$$nazhuaConfig = ${g(n)};`;r.value=l,x.value=!1,setTimeout(()=>{x.value=!0},300)}function u(){const n=document.createElement("textarea");n.value=r.value,document.body.appendChild(n),n.select(),document.execCommand("Copy"),document.body.removeChild(n),G.success("复制成功")}function h(){const n=new Blob([r.value],{type:"text/plain"}),l=URL.createObjectURL(n),s=document.createElement("a");s.href=l,s.download="config.js",s.click(),URL.revokeObjectURL(l)}function S(){var l;const n=(l=a==null?void 0:a.refreshData)==null?void 0:l.call(a);n&&k(n)}return y({setData(n){k(n)}}),(n,l)=>{const s=C("highlightjs"),p=C("el-button");return _(),V("div",ft,[t("div",yt,[t("div",ht,[x.value?(_(),N(s,{key:0,language:"js",code:r.value},null,8,["code"])):H("",!0)]),t("div",vt,[t("div",_t,[d(p,{type:"success",plain:"",onClick:u},{default:f(()=>l[0]||(l[0]=[U(" 复制内容 ")])),_:1}),d(p,{type:"primary",plain:"",onClick:h},{default:f(()=>l[1]||(l[1]=[U(" 下载文件 ")])),_:1})]),t("div",xt,[d(p,{type:"danger",plain:"",onClick:S},{default:f(()=>l[2]||(l[2]=[U(" 重载配置 ")])),_:1})])])])])}}},bt=R(gt,[["__scopeId","data-v-a018bdc1"]]),wt={class:"home-page"},Ct={class:"home-container container"},kt={__name:"home",setup(i){const y=M("mapPoint"),a=M(null),x=M(null),r=M(null);function g(){var S,n,l,s;const u=(n=(S=a.value)==null?void 0:S.getData)==null?void 0:n.call(S),h=(s=(l=x.value)==null?void 0:l.getData)==null?void 0:s.call(l);return u!=null&&u.customCodeMap&&Object.keys(u.customCodeMap).length&&(h.customCodeMap=u==null?void 0:u.customCodeMap),h}function k(){var u,h;y.value==="exportConfig"&&((h=(u=r.value)==null?void 0:u.setData)==null||h.call(u,g()),console.log("导出配置",g()))}return(u,h)=>{const S=C("el-tab-pane"),n=C("el-tabs");return _(),V("div",wt,[h[1]||(h[1]=t("div",{class:"home-header"},[t("div",{class:"home-header-container container"},[t("div",{class:"left-box"},[t("h1",{class:"site-name"},"Nazhua配置生成器")]),t("div",{class:"right-box"},[t("a",{class:"github-link",href:"https://github.com/hi2shark/nazhua",_target:"blank"}," Github ")])])],-1)),t("div",Ct,[d(n,{modelValue:y.value,"onUpdate:modelValue":h[0]||(h[0]=l=>y.value=l),onTabChange:k},{default:f(()=>[d(S,{label:"地图坐标拾取",name:"mapPoint"},{default:f(()=>[d(et,{ref_key:"worldMapBoxRef",ref:a},null,512)]),_:1}),d(S,{label:"自定义配置",name:"customConfig"},{default:f(()=>[d(mt,{ref_key:"configBoxRef",ref:x},null,512)]),_:1}),d(S,{label:"导出配置",name:"exportConfig"},{default:f(()=>[d(bt,{ref_key:"exportBoxRef",ref:r,"refresh-data":g},null,512)]),_:1})]),_:1},8,["modelValue"])])])}}},Mt=R(kt,[["__scopeId","data-v-d140ac2e"]]);export{Mt as default};
